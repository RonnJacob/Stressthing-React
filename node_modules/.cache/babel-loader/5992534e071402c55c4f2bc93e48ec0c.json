{"ast":null,"code":"import _toConsumableArray from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jessding/Downloads/HackUMass/src/components/recipes/EndorsedRecipes.js\";\nimport React from 'react';\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport RecipeCard from \"../LandingPage/RecipeCard\";\nimport GuestNav from \"../LandingPage/GuestNav\";\nimport '../../assets/landingpage/css/sidebar.css';\nimport FilterRecipes from \"../Explore/FilterRecipes\";\nimport '../Explore/Explore.css';\nimport HomePageNav from \"../HomePageNav/HomePageNav\";\nimport MealDBServices from \"../../services/MealDBServices\";\nimport { Link } from \"react-router-dom\";\nimport ChefServices from \"../../services/ChefServices\";\nimport { getFromStorage } from \"../../utils/storage\";\nimport UserServices from \"../../services/UserServices\";\n\nvar EndorsedRecipes =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EndorsedRecipes, _React$Component);\n\n  function EndorsedRecipes(props) {\n    var _this;\n\n    _classCallCheck(this, EndorsedRecipes);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EndorsedRecipes).call(this, props));\n\n    _this.handleClick = function (event) {\n      return _this.setState({\n        currentPage: Number(event.target.id)\n      });\n    };\n\n    _this.findRecipesByCategory = function (category) {\n      var filteredresult = [];\n\n      _this.chefServices.findEndorsedRecipes('5cb93fa8d765b8de30a1ace2').then(function (recipes) {\n        recipes.map(function (recipe) {\n          if (recipe.strCategory ? recipe.strCategory === category : recipe.category === category) filteredresult.push(recipe);\n        });\n\n        _this.setState({\n          recipes: filteredresult\n        });\n      });\n    };\n\n    _this.findRecipesByCuisine = function (cuisine) {\n      _this.mealDBServices.findRecipesByCuisines(cuisine).then(function (recipes) {\n        _this.setState({\n          recipes: recipes.meals\n        });\n      });\n    };\n\n    _this.sortAscend = function () {\n      var unsortedRecipes = _this.state.recipes;\n      var sortedRecipes = unsortedRecipes.sort(_this.compareAsc);\n\n      _this.setState({\n        recipes: sortedRecipes,\n        sorted: 1\n      });\n\n      _this.mealDBServices.findAllRecipes().then(function (recipes) {\n        _this.setState({\n          unsortedRecipes: recipes.meals\n        });\n      });\n    };\n\n    _this.sortDescend = function () {\n      var dummy = _this.state.recipes; // const unsortedRecipes=this.state.recipes;\n\n      console.log();\n      var sortedRecipes = dummy.sort(_this.compareDesc);\n\n      _this.setState({\n        recipes: sortedRecipes,\n        sorted: 1\n      });\n\n      _this.mealDBServices.findAllRecipes().then(function (recipes) {\n        _this.setState({\n          unsortedRecipes: recipes.meals\n        });\n      });\n    };\n\n    _this.resetSort = function () {\n      var endorsed = [];\n\n      _this.chefServices.findEndorsedRecipes(_this.state.userId).then(function (recipes) {\n        recipes.map(function (recipe) {\n          console.log(\"Inside the map Recipe = \" + recipe.name);\n          endorsed = [].concat(_toConsumableArray(endorsed), [recipe]);\n          console.log(\"Inside the map Array of recipes = \" + endorsed.length);\n        });\n      }).then(function () {\n        return _this.chefServices.findEndorsedRecipeId(_this.state.userId);\n      }).then(function (recipeIds) {\n        recipeIds.map(function (recipeId) {\n          if (recipeId.length === 5) {\n            _this.mealDBServices.findRecipeById(recipeId).then(function (recipeFromAPI) {\n              var recipeFound = {};\n              recipeFound._id = recipeFromAPI.meals[0].idMeal;\n              recipeFound.name = recipeFromAPI.meals[0].strMeal;\n              recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' + recipeFromAPI.meals[0].strIngredient2 + ',' + recipeFromAPI.meals[0].strIngredient3 + ',' + recipeFromAPI.meals[0].strIngredient4 + ',' + recipeFromAPI.meals[0].strIngredient5;\n              recipeFound.steps = recipeFromAPI.meals[0].strInstructions;\n              recipeFound.image = recipeFromAPI.meals[0].strMealThumb;\n              recipeFound.endorsedByChef = [];\n              recipeFound.endorsedByNutritionist = [];\n              recipeFound.ownedBy = \"Anonymous\";\n              recipeFound.category = \"Miscellaneous\";\n              endorsed = [].concat(_toConsumableArray(endorsed), [recipeFound]);\n              endorsed = endorsed.filter(function (a) {\n                return !this[a._id] && (this[a._id] = true);\n              }, Object.create(null));\n            }).then(function () {\n              //alert(finalFavorites.length)\n              _this.setState({\n                recipes: endorsed\n              });\n            });\n          }\n        });\n      });\n    };\n\n    _this.mealDBServices = new MealDBServices();\n    _this.chefServices = new ChefServices();\n    _this.userServices = new UserServices();\n    var userId = props.match.params['userId'];\n    _this.state = {\n      recipes: [],\n      unsortedRecipes: [],\n      searchRecipe: '',\n      popularRecipes: [],\n      filterCategory: [],\n      sorted: 0,\n      currentPage: 1,\n      recipesPerPage: 6,\n      userId: userId\n    }; //this.searchRecipe = this.searchRecipe.bind(this);\n\n    return _this;\n  }\n\n  _createClass(EndorsedRecipes, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      document.title = \"Endorsed Recipes\";\n      var endorsed = [];\n      this.chefServices.findEndorsedRecipes(this.state.userId).then(function (recipes) {\n        recipes.map(function (recipe) {\n          console.log(\"Inside the map Recipe = \" + recipe.name);\n          endorsed = [].concat(_toConsumableArray(endorsed), [recipe]);\n          console.log(\"Inside the map Array of recipes = \" + endorsed.length);\n        });\n      }).then(function () {\n        return _this2.chefServices.findEndorsedRecipeId(_this2.state.userId);\n      }).then(function (recipeIds) {\n        recipeIds.map(function (recipeId) {\n          if (recipeId.length === 5) {\n            _this2.mealDBServices.findRecipeById(recipeId).then(function (recipeFromAPI) {\n              var recipeFound = {};\n              recipeFound._id = recipeFromAPI.meals[0].idMeal;\n              recipeFound.name = recipeFromAPI.meals[0].strMeal;\n              recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' + recipeFromAPI.meals[0].strIngredient2 + ',' + recipeFromAPI.meals[0].strIngredient3 + ',' + recipeFromAPI.meals[0].strIngredient4 + ',' + recipeFromAPI.meals[0].strIngredient5;\n              recipeFound.steps = recipeFromAPI.meals[0].strInstructions;\n              recipeFound.image = recipeFromAPI.meals[0].strMealThumb;\n              recipeFound.endorsedByChef = [];\n              recipeFound.endorsedByNutritionist = [];\n              recipeFound.ownedBy = \"Anonymous\";\n              recipeFound.category = \"Miscellaneous\";\n              endorsed = [].concat(_toConsumableArray(endorsed), [recipeFound]);\n              endorsed = endorsed.filter(function (a) {\n                return !this[a._id] && (this[a._id] = true);\n              }, Object.create(null));\n            }).then(function () {\n              //alert(finalFavorites.length)\n              _this2.setState({\n                recipes: endorsed\n              });\n            });\n          }\n        });\n      });\n      var obj = getFromStorage('project_april');\n\n      if (obj && obj.token) {\n        var token = obj.token;\n        this.userServices.verifyUser(token).then(function (json) {\n          if (!json.success) {\n            window.location.href = '/';\n          } else if (json.success) {\n            _this2.chefServices.findEndorsedRecipes(_this2.state.userId).then(function (recipes) {\n              _this2.setState({\n                recipes: recipes.meals ? recipes.meals : recipes\n              });\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var endorsed = [];\n      this.chefServices.findEndorsedRecipes(this.state.userId).then(function (recipes) {\n        recipes.map(function (recipe) {\n          console.log(\"Inside the map Recipe = \" + recipe.name);\n          endorsed = [].concat(_toConsumableArray(endorsed), [recipe]);\n          console.log(\"Inside the map Array of recipes = \" + endorsed.length);\n        });\n      }).then(function () {\n        return _this3.chefServices.findEndorsedRecipeId(_this3.state.userId);\n      }).then(function (recipeIds) {\n        recipeIds.map(function (recipeId) {\n          if (recipeId.length === 5) {\n            _this3.mealDBServices.findRecipeById(recipeId).then(function (recipeFromAPI) {\n              var recipeFound = {};\n              recipeFound._id = recipeFromAPI.meals[0].idMeal;\n              recipeFound.name = recipeFromAPI.meals[0].strMeal;\n              recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' + recipeFromAPI.meals[0].strIngredient2 + ',' + recipeFromAPI.meals[0].strIngredient3 + ',' + recipeFromAPI.meals[0].strIngredient4 + ',' + recipeFromAPI.meals[0].strIngredient5;\n              recipeFound.steps = recipeFromAPI.meals[0].strInstructions;\n              recipeFound.image = recipeFromAPI.meals[0].strMealThumb;\n              recipeFound.endorsedByChef = [];\n              recipeFound.endorsedByNutritionist = [];\n              recipeFound.ownedBy = \"Anonymous\";\n              recipeFound.category = \"Miscellaneous\";\n              endorsed = [].concat(_toConsumableArray(endorsed), [recipeFound]);\n              endorsed = endorsed.filter(function (a) {\n                return !this[a._id] && (this[a._id] = true);\n              }, Object.create(null));\n            }).then(function () {\n              //alert(finalFavorites.length)\n              _this3.setState({\n                unSortedRecipes: endorsed\n              });\n            });\n          }\n        });\n      });\n    }\n  }, {\n    key: \"compareAsc\",\n    value: function compareAsc(a, b) {\n      // Use toUpperCase() to ignore character casing\n      var recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n      var recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n      var comparison = 0;\n\n      if (recipeA > recipeB) {\n        comparison = 1;\n      } else if (recipeA < recipeB) {\n        comparison = -1;\n      }\n\n      return comparison;\n    }\n  }, {\n    key: \"compareDesc\",\n    value: function compareDesc(a, b) {\n      // Use toUpperCase() to ignore character casing\n      var recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n      var recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n      var comparison = 0;\n\n      if (recipeA > recipeB) {\n        comparison = 1;\n      } else if (recipeA < recipeB) {\n        comparison = -1;\n      }\n\n      return comparison * -1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          recipes = _this$state.recipes,\n          currentPage = _this$state.currentPage,\n          recipesPerPage = _this$state.recipesPerPage; // Logic for displaying todos\n\n      var indexOfLastRecipe = currentPage * recipesPerPage;\n      var indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n      var currentRecipes = recipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n      var renderRecipes = currentRecipes.map(function (recipe) {\n        return React.createElement(RecipeCard, {\n          popularRecipe: recipe,\n          recipeOwner: recipe.ownedBy ? recipe.ownedBy : \"Anonymous\",\n          loggedIn: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        });\n      }); // Logic for displaying page numbers\n\n      var pageNumbers = [];\n\n      for (var i = 1; i <= Math.ceil(recipes.length / recipesPerPage); i++) {\n        pageNumbers.push(i);\n      }\n\n      var renderPageNumbers = pageNumbers.map(function (number) {\n        return React.createElement(\"li\", {\n          className: \"horizontal-li\",\n          key: number,\n          id: number,\n          onClick: _this4.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        }, \"\\xA0\\xA0\\xA0\", React.createElement(\"label\", {\n          className: \"hover-underline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 337\n          },\n          __self: this\n        }, number));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"table-area section-padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"section-top2 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"My \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"Endorsed\"), \" recipes\"), React.createElement(\"p\", {\n        className: \"text-white link-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"text-white link-nav\",\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"Home \"), \" \", React.createElement(\"span\", {\n        className: \"lnr lnr-arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }), React.createElement(Link, {\n        className: \"text-white link-nav\",\n        to: \"/chef/\".concat(this.state.userId, \"/endorsedRecipes\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, \"My Endorsed Recipes\")))))))), React.createElement(\"section\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"filter-bar d-flex flex-wrap align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sorting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sorting mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pagination\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"pagination\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        className: \"prev-arrow head\",\n        onClick: this.sortAscend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sort-alpha-asc\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      })), React.createElement(\"a\", {\n        href: \"#\",\n        className: \"next-arrow head\",\n        onClick: this.sortDescend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sort-alpha-desc\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      })), React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.resetSort,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"reset\"))), React.createElement(\"div\", {\n        className: \"food-area \",\n        id: \"food-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, this.state.recipes && renderRecipes, React.createElement(\"ul\", {\n        id: \"page-numbers\",\n        className: \"page-numbers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }))))))));\n    }\n  }]);\n\n  return EndorsedRecipes;\n}(React.Component);\n\nexport default EndorsedRecipes;","map":{"version":3,"sources":["/Users/jessding/Downloads/HackUMass/src/components/recipes/EndorsedRecipes.js"],"names":["React","RegularUserServices","RecipeCard","GuestNav","FilterRecipes","HomePageNav","MealDBServices","Link","ChefServices","getFromStorage","UserServices","EndorsedRecipes","props","handleClick","event","setState","currentPage","Number","target","id","findRecipesByCategory","category","filteredresult","chefServices","findEndorsedRecipes","then","recipes","map","recipe","strCategory","push","findRecipesByCuisine","cuisine","mealDBServices","findRecipesByCuisines","meals","sortAscend","unsortedRecipes","state","sortedRecipes","sort","compareAsc","sorted","findAllRecipes","sortDescend","dummy","console","log","compareDesc","resetSort","endorsed","userId","name","length","findEndorsedRecipeId","recipeIds","recipeId","findRecipeById","recipeFromAPI","recipeFound","_id","idMeal","strMeal","ingredients","strIngredient1","strIngredient2","strIngredient3","strIngredient4","strIngredient5","steps","strInstructions","image","strMealThumb","endorsedByChef","endorsedByNutritionist","ownedBy","filter","a","Object","create","userServices","match","params","searchRecipe","popularRecipes","filterCategory","recipesPerPage","document","title","obj","token","verifyUser","json","success","window","location","href","unSortedRecipes","b","recipeA","toUpperCase","recipeB","comparison","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","renderRecipes","pageNumbers","i","Math","ceil","renderPageNumbers","number","Component"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport RecipeCard from \"../LandingPage/RecipeCard\";\nimport GuestNav from \"../LandingPage/GuestNav\";\nimport '../../assets/landingpage/css/sidebar.css'\nimport FilterRecipes from \"../Explore/FilterRecipes\";\nimport '../Explore/Explore.css'\nimport HomePageNav from \"../HomePageNav/HomePageNav\";\nimport MealDBServices from \"../../services/MealDBServices\";\nimport {Link} from \"react-router-dom\";\nimport ChefServices from \"../../services/ChefServices\";\nimport {getFromStorage} from \"../../utils/storage\";\nimport UserServices from \"../../services/UserServices\";\n\nclass EndorsedRecipes extends React.Component {\n    constructor(props) {\n        super(props);\n        this.mealDBServices = new MealDBServices();\n        this.chefServices = new ChefServices();\n        this.userServices = new UserServices();\n        const userId = props.match.params['userId'];\n        this.state = {\n            recipes: [],\n            unsortedRecipes: [],\n            searchRecipe: '',\n            popularRecipes: [],\n            filterCategory: [],\n            sorted: 0,\n            currentPage: 1,\n            recipesPerPage: 6,\n            userId: userId\n        };\n        //this.searchRecipe = this.searchRecipe.bind(this);\n    }\n\n    componentWillMount() {\n        document.title = \"Endorsed Recipes\";\n        var endorsed = [];\n        this.chefServices.findEndorsedRecipes(this.state.userId)\n            .then(recipes => {\n                recipes.map(recipe => {\n                        console.log(\"Inside the map Recipe = \" + recipe.name)\n                        endorsed = [...endorsed, recipe]\n                        console.log(\"Inside the map Array of recipes = \" + endorsed.length)\n                    }\n                )\n            }).then(() => this.chefServices.findEndorsedRecipeId(this.state.userId))\n            .then(recipeIds => {\n                recipeIds.map(recipeId => {\n                    if (recipeId.length === 5) {\n                        this.mealDBServices.findRecipeById(recipeId)\n                            .then(recipeFromAPI => {\n                                let recipeFound = {};\n                                recipeFound._id=recipeFromAPI.meals[0].idMeal;\n                                recipeFound.name = recipeFromAPI.meals[0].strMeal\n                                recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient2 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient3 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient4 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient5\n                                recipeFound.steps = recipeFromAPI.meals[0].strInstructions\n                                recipeFound.image = recipeFromAPI.meals[0].strMealThumb\n                                recipeFound.endorsedByChef = []\n                                recipeFound.endorsedByNutritionist = []\n                                recipeFound.ownedBy = \"Anonymous\"\n                                recipeFound.category = \"Miscellaneous\"\n                                endorsed = [...endorsed, recipeFound]\n\n                                endorsed = endorsed.filter(function (a) {\n                                    return !this[a._id] && (this[a._id] = true);\n                                }, Object.create(null));\n\n\n                            }).then(() => {\n                            //alert(finalFavorites.length)\n                            this.setState({\n                                recipes: endorsed\n                            })\n                        });\n                    }\n                })\n\n            })\n\n\n        const obj = getFromStorage('project_april');\n        if (obj && obj.token) {\n            const { token } = obj;\n            this.userServices.verifyUser(token).then(json => {\n                if(!json.success){\n                    window.location.href='/';\n                }\n                else if(json.success){\n                    this.chefServices.findEndorsedRecipes(this.state.userId)\n                        .then(recipes => {\n                            this.setState\n                            ({\n                                recipes: recipes.meals?recipes.meals:recipes\n                            })\n                        });\n                }\n            });\n        }\n    }\n\n    componentDidMount() {\n\n        var endorsed = [];\n        this.chefServices.findEndorsedRecipes(this.state.userId)\n            .then(recipes => {\n                recipes.map(recipe => {\n                        console.log(\"Inside the map Recipe = \" + recipe.name)\n                        endorsed = [...endorsed, recipe]\n                        console.log(\"Inside the map Array of recipes = \" + endorsed.length)\n                    }\n                )\n            }).then(() => this.chefServices.findEndorsedRecipeId(this.state.userId))\n            .then(recipeIds => {\n                recipeIds.map(recipeId => {\n                    if (recipeId.length === 5) {\n                        this.mealDBServices.findRecipeById(recipeId)\n                            .then(recipeFromAPI => {\n                                let recipeFound = {};\n                                recipeFound._id=recipeFromAPI.meals[0].idMeal;\n                                recipeFound.name = recipeFromAPI.meals[0].strMeal\n                                recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient2 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient3 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient4 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient5\n                                recipeFound.steps = recipeFromAPI.meals[0].strInstructions\n                                recipeFound.image = recipeFromAPI.meals[0].strMealThumb\n                                recipeFound.endorsedByChef = []\n                                recipeFound.endorsedByNutritionist = []\n                                recipeFound.ownedBy = \"Anonymous\"\n                                recipeFound.category = \"Miscellaneous\"\n                                endorsed = [...endorsed, recipeFound]\n\n                                endorsed = endorsed.filter(function (a) {\n                                    return !this[a._id] && (this[a._id] = true);\n                                }, Object.create(null));\n\n\n                            }).then(() => {\n                            //alert(finalFavorites.length)\n                            this.setState({\n                                unSortedRecipes: endorsed\n                            })\n                        });\n                    }\n                })\n\n            })\n\n    }\n\n    handleClick = event => {\n        return this.setState({\n            currentPage: Number(event.target.id)\n        })\n    }\n\n\n    findRecipesByCategory = (category) => {\n        var filteredresult=[];\n        this.chefServices.findEndorsedRecipes('5cb93fa8d765b8de30a1ace2')\n            .then(recipes => {\n                recipes.map(recipe=>{\n                    if(recipe.strCategory?recipe.strCategory===category:(recipe.category===category))\n                        filteredresult.push(recipe);\n                })\n                this.setState\n                ({\n                    recipes: filteredresult\n                })\n            });\n    }\n\n    findRecipesByCuisine = (cuisine) => {\n        this.mealDBServices.findRecipesByCuisines(cuisine)\n            .then(recipes => {\n                this.setState\n                ({recipes: recipes.meals})\n            });\n    }\n\n\n    compareAsc(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const recipeA = a.strMeal?a.strMeal.toUpperCase():a.name.toUpperCase();\n        const recipeB = b.strMeal?b.strMeal.toUpperCase():b.name.toUpperCase();\n\n        let comparison = 0;\n        if (recipeA > recipeB) {\n            comparison = 1;\n        } else if (recipeA < recipeB) {\n            comparison = -1;\n        }\n        return comparison;\n    }\n\n    compareDesc(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const recipeA = a.strMeal?a.strMeal.toUpperCase():a.name.toUpperCase();\n        const recipeB = b.strMeal?b.strMeal.toUpperCase():b.name.toUpperCase();\n\n        let comparison = 0;\n        if (recipeA > recipeB) {\n            comparison = 1;\n        } else if (recipeA < recipeB) {\n            comparison = -1;\n        }\n        return comparison * -1;\n    }\n\n    sortAscend = () => {\n        var unsortedRecipes = this.state.recipes;\n        const sortedRecipes = unsortedRecipes.sort(this.compareAsc);\n\n        this.setState\n        ({\n            recipes: sortedRecipes,\n            sorted: 1\n        })\n        this.mealDBServices.findAllRecipes()\n            .then(recipes => {\n                this.setState\n                ({\n\n                    unsortedRecipes: recipes.meals\n                })\n            });\n\n    };\n\n    sortDescend = () => {\n        var dummy = this.state.recipes;\n        // const unsortedRecipes=this.state.recipes;\n        console.log()\n        const sortedRecipes = dummy.sort(this.compareDesc);\n\n        this.setState\n        ({\n            recipes: sortedRecipes,\n            sorted: 1\n        })\n        this.mealDBServices.findAllRecipes()\n            .then(recipes => {\n                this.setState\n                ({\n\n                    unsortedRecipes: recipes.meals\n                })\n            });\n\n\n    };\n\n    resetSort = () => {\n        var endorsed = [];\n        this.chefServices.findEndorsedRecipes(this.state.userId)\n            .then(recipes => {\n                recipes.map(recipe => {\n                        console.log(\"Inside the map Recipe = \" + recipe.name)\n                        endorsed = [...endorsed, recipe]\n                        console.log(\"Inside the map Array of recipes = \" + endorsed.length)\n                    }\n                )\n            }).then(() => this.chefServices.findEndorsedRecipeId(this.state.userId))\n            .then(recipeIds => {\n                recipeIds.map(recipeId => {\n                    if (recipeId.length === 5) {\n                        this.mealDBServices.findRecipeById(recipeId)\n                            .then(recipeFromAPI => {\n                                let recipeFound = {};\n                                recipeFound._id=recipeFromAPI.meals[0].idMeal;\n                                recipeFound.name = recipeFromAPI.meals[0].strMeal\n                                recipeFound.ingredients = recipeFromAPI.meals[0].strIngredient1 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient2 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient3 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient4 + ',' +\n                                    recipeFromAPI.meals[0].strIngredient5\n                                recipeFound.steps = recipeFromAPI.meals[0].strInstructions\n                                recipeFound.image = recipeFromAPI.meals[0].strMealThumb\n                                recipeFound.endorsedByChef = []\n                                recipeFound.endorsedByNutritionist = []\n                                recipeFound.ownedBy = \"Anonymous\"\n                                recipeFound.category = \"Miscellaneous\"\n                                endorsed = [...endorsed, recipeFound]\n\n                                endorsed = endorsed.filter(function (a) {\n                                    return !this[a._id] && (this[a._id] = true);\n                                }, Object.create(null));\n\n\n                            }).then(() => {\n                            //alert(finalFavorites.length)\n                            this.setState({\n                                recipes: endorsed\n                            })\n                        });\n                    }\n                })\n\n            })\n\n    }\n\n\n\n\n    render() {\n        const {recipes, currentPage, recipesPerPage} = this.state;\n\n        // Logic for displaying todos\n        const indexOfLastRecipe = currentPage * recipesPerPage;\n        const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n        const currentRecipes = recipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n        const renderRecipes = currentRecipes.map(recipe => {\n            return <RecipeCard popularRecipe={recipe} recipeOwner={recipe.ownedBy?recipe.ownedBy:\"Anonymous\"} loggedIn={true}/>\n        });\n\n        // Logic for displaying page numbers\n        const pageNumbers = [];\n        for (let i = 1; i <= Math.ceil(recipes.length / recipesPerPage); i++) {\n            pageNumbers.push(i);\n        }\n\n        const renderPageNumbers = pageNumbers.map(number => {\n            return (\n                <li className='horizontal-li'\n                    key={number}\n                    id={number}\n                    onClick={this.handleClick}>\n                    &nbsp;&nbsp;&nbsp;<label className='hover-underline'>{number}</label>\n                </li>\n            );\n        });\n\n        return (\n\n            <div>\n                {/*<LandingPageHeader/>*/}\n                <div id=\"header\">\n                    {/*<HomePageNav/>*/}\n                </div>\n                <div>\n                    <section className=\"table-area section-padding\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-lg-12\">\n                                    <div className=\"section-top2 text-center\">\n                                        <h3>My <span>Endorsed</span> recipes</h3>\n                                        <p className=\"text-white link-nav\"><Link className=\"text-white link-nav\" to={`/home`}>Home </Link> <span\n                                            className=\"lnr lnr-arrow-right\"></span>\n                                            <Link className=\"text-white link-nav\" to={`/chef/${this.state.userId}/endorsedRecipes`}>My Endorsed Recipes</Link>\n\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <section className=\"header\">\n                    <div className=\"row\">\n\n                        <div className=\"container-fluid\">\n                            <div className=\"filter-bar d-flex flex-wrap align-items-center\">\n                                <div className=\"sorting\">\n\n                                </div>\n                                <div className=\"sorting mr-auto\">\n                                    <div className=\"pagination\">\n\n\n                                    </div>\n                                </div>\n\n\n                                <div className=\"pagination\">\n                                    <a href=\"#\" className=\"prev-arrow head\" onClick={this.sortAscend}><i className=\"fa fa-sort-alpha-asc\"\n                                                                                                         aria-hidden=\"true\"></i></a>\n                                    <a href=\"#\" className=\"next-arrow head\" onClick={this.sortDescend}><i className=\"fa fa-sort-alpha-desc\"\n                                                                                                          aria-hidden=\"true\"></i></a>\n\n                                    <a href=\"#\" onClick={this.resetSort}>reset</a>\n                                </div>\n                            </div>\n\n\n                            <div className=\"food-area \" id={\"food-area\"}>\n\n                                <div className=\"container\">\n                                    <div className=\"row\">\n                                        {this.state.recipes && renderRecipes}\n                                        <ul id=\"page-numbers\" className=\"page-numbers\">\n                                            {/*{renderPageNumbers}*/}\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n            </div>\n        )\n    }\n}\n\nexport default EndorsedRecipes;\n"]},"metadata":{},"sourceType":"module"}