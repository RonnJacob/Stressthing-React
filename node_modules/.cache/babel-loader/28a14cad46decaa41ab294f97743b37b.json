{"ast":null,"code":"import _toConsumableArray from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ronn/Desktop/HackUMass/StressThing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ronn/Desktop/HackUMass/StressThing/src/components/recipes/SearchRecipesByIngredients.js\";\nimport React from 'react';\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport RecipeCard from \"../LandingPage/RecipeCard\";\nimport '../../assets/landingpage/css/sidebar.css';\nimport '../Explore/Explore.css';\nimport MealDBServices from \"../../services/MealDBServices\";\nimport RecipeServices from \"../../services/RecipeServices\";\nimport { getFromStorage } from \"../../utils/storage\";\nimport UserServices from \"../../services/UserServices\";\nimport { Link } from \"react-router-dom\";\nimport { NoResults } from \"../LandingPage/NoResults\";\n\nvar SearchRecipesByIngredients =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SearchRecipesByIngredients, _React$Component);\n\n  function SearchRecipesByIngredients(props) {\n    var _this;\n\n    _classCallCheck(this, SearchRecipesByIngredients);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchRecipesByIngredients).call(this, props));\n\n    _this.handleClick = function (event) {\n      return _this.setState({\n        currentPage: Number(event.target.id)\n      });\n    };\n\n    _this.findRecipesByIngredient = function (ingredients) {\n      var foundRecipes = [];\n      ingredients.map(function (ingredient) {\n        _this.mealDBServices.findRecipesByIngredient(ingredient.name.toLowerCase()).then(function (r) {\n          r.meals && r.meals.map(function (recipe) {\n            foundRecipes = [].concat(_toConsumableArray(foundRecipes), [recipe]);\n          });\n          return foundRecipes;\n        }).then(function (recipes) {\n          _this.setState({\n            recipes: recipes,\n            searchAttempted: true\n          });\n        });\n      });\n\n      _this.setState({\n        searchAttempted: true\n      });\n    };\n\n    _this.findAllCuisines = function () {\n      _this.mealDBServices.findAllCuisines().then(function (filterCategory) {\n        _this.setState({\n          filterCategory: filterCategory.meals\n        });\n      });\n    };\n\n    _this.findAllCategories = function () {\n      _this.mealDBServices.findAllCategories().then(function (filterCategory) {\n        _this.setState({\n          filterCategory: filterCategory.meals\n        });\n      });\n    };\n\n    _this.findRecipesByCategory = function (category) {\n      var filteredresult = []; // var recipes=this.state.recipes;\n      // this.setState\n      // ({\n      //     unsortedRecipes: recipes\n      // })\n\n      _this.regularUserServices.findOwnRecipes(_this.state.userId).then(function (recipes) {\n        recipes.map(function (recipe) {\n          if (recipe.strCategory ? recipe.strCategory === category : recipe.category === category) filteredresult.push(recipe);\n        });\n\n        _this.setState({\n          recipes: filteredresult\n        });\n      });\n    };\n\n    _this.findRecipesByCuisine = function (cuisine) {\n      _this.mealDBServices.findRecipesByCuisines(cuisine).then(function (recipes) {\n        _this.setState({\n          recipes: recipes.meals\n        });\n      });\n    };\n\n    _this.sortAscend = function () {\n      var unsortedRecipes = _this.state.recipes;\n      var sortedRecipes = unsortedRecipes.sort(_this.compareAsc);\n\n      _this.setState({\n        recipes: sortedRecipes,\n        sorted: 1\n      });\n\n      _this.mealDBServices.findAllRecipes().then(function (recipes) {\n        _this.setState({\n          unsortedRecipes: recipes.meals\n        });\n      });\n    };\n\n    _this.sortDescend = function () {\n      var dummy = _this.state.recipes; // const unsortedRecipes=this.state.recipes;\n\n      console.log();\n      var sortedRecipes = dummy.sort(_this.compareDesc);\n\n      _this.setState({\n        recipes: sortedRecipes,\n        sorted: 1\n      });\n\n      _this.mealDBServices.findAllRecipes().then(function (recipes) {\n        _this.setState({\n          unsortedRecipes: recipes.meals\n        });\n      });\n    };\n\n    _this.resetSort = function () {\n      if (_this.state.searchAttempted) _this.findRecipesByIngredient(_this.state.ingredients);else {\n        _this.setState({\n          searchAttempted: false\n        });\n      }\n    };\n\n    _this.deleteRecipe = function (recipeId) {\n      _this.recipeServices.deleteRecipe(recipeId).then(_this.regularUserServices.deleteOwnRecipe(_this.state.userId, recipeId).then(_this.regularUserServices.findOwnRecipes(_this.state.userId).then(function (recipes) {\n        _this.setState({\n          recipes: recipes.meals ? recipes.meals : recipes\n        });\n      })));\n    };\n\n    _this.searchChanged = function (event) {\n      _this.setState({\n        searchRecipe: event.target.value\n      });\n    };\n\n    _this.mealDBServices = new MealDBServices();\n    _this.regularUserServices = new RegularUserServices();\n    _this.recipeServices = new RecipeServices();\n    _this.userServices = new UserServices();\n    _this.state = {\n      ingredients: [],\n      userId: _this.props.match.params.userId,\n      recipes: [],\n      searchAttempted: false\n    }; //this.searchRecipe = this.searchRecipe.bind(this);\n\n    return _this;\n  }\n\n  _createClass(SearchRecipesByIngredients, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      document.title = \"Find Recipes\";\n      var obj = getFromStorage('project_april');\n\n      if (obj && obj.token) {\n        var token = obj.token;\n        this.userServices.verifyUser(token).then(function (json) {\n          if (!json.success) {\n            window.location.href = '/';\n          } else if (json.success) {\n            _this2.regularUserServices.findOwnIngredients(_this2.state.userId).then(function (ingredients) {\n              _this2.setState({\n                ingredients: ingredients\n              });\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"compareAsc\",\n    value: function compareAsc(a, b) {\n      // Use toUpperCase() to ignore character casing\n      var recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n      var recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n      var comparison = 0;\n\n      if (recipeA > recipeB) {\n        comparison = 1;\n      } else if (recipeA < recipeB) {\n        comparison = -1;\n      }\n\n      return comparison;\n    }\n  }, {\n    key: \"compareDesc\",\n    value: function compareDesc(a, b) {\n      // Use toUpperCase() to ignore character casing\n      var recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n      var recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n      var comparison = 0;\n\n      if (recipeA > recipeB) {\n        comparison = 1;\n      } else if (recipeA < recipeB) {\n        comparison = -1;\n      }\n\n      return comparison * -1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          recipes = _this$state.recipes,\n          currentPage = _this$state.currentPage,\n          recipesPerPage = _this$state.recipesPerPage; // Logic for displaying todos\n\n      var indexOfLastRecipe = currentPage * recipesPerPage;\n      var indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n      var currentRecipes = recipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n      var renderRecipes = this.state.recipes.map(function (recipe) {\n        return React.createElement(RecipeCard, {\n          recipeOwner: recipe.ownedBy ? recipe.ownedBy : \"Anonymous\",\n          popularRecipe: recipe,\n          deleteRecipe: _this3.deleteRecipe,\n          loggedIn: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        });\n      }); // Logic for displaying page numbers\n\n      var pageNumbers = [];\n\n      for (var i = 1; i <= Math.ceil(recipes.length / recipesPerPage); i++) {\n        pageNumbers.push(i);\n      }\n\n      var renderPageNumbers = pageNumbers.map(function (number) {\n        return React.createElement(\"li\", {\n          className: \"horizontal-li\",\n          key: number,\n          id: number,\n          onClick: _this3.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, \"\\xA0\\xA0\\xA0\", React.createElement(\"label\", {\n          className: \"hover-underline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, number));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"table-area section-padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"section-top2 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Find \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Recipes\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"Time to get into a yummilicious world. \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"Click\"), \" on the \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"button\"), \" below to find recipes matching you grocery stock!\")), React.createElement(\"p\", {\n        className: \"text-white link-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"text-white link-nav\",\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"Home \"), \" \", React.createElement(\"span\", {\n        className: \"lnr lnr-arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }), React.createElement(Link, {\n        className: \"text-white link-nav\",\n        to: \"/user/\".concat(this.state.user, \"/findrecipes\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"Let's Cook\"))), React.createElement(\"div\", {\n        className: \"table-btn text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        className: \"template-btn template-btn2 mt-4\",\n        onClick: function onClick() {\n          return _this3.findRecipesByIngredient(_this3.state.ingredients);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"Get Recipes\"))))))), React.createElement(\"section\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"split fleft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"side-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sidebar-categories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Available Groceries\"), React.createElement(\"ul\", {\n        className: \"main-categories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, this.state.ingredients.map(function (ingredient) {\n        return React.createElement(\"li\", {\n          className: \"main-nav-list child\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          tabIndex: \"1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, ingredient.name, React.createElement(\"span\", {\n          className: \"number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        })));\n      })))))), React.createElement(\"div\", {\n        className: \"split fright\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"filter-bar d-flex flex-wrap align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sorting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sorting mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pagination\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"pagination\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        className: \"prev-arrow head\",\n        onClick: this.sortAscend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sort-alpha-asc\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      })), React.createElement(\"a\", {\n        href: \"#\",\n        className: \"next-arrow head\",\n        onClick: this.sortDescend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-sort-alpha-desc\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      })), React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.resetSort,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, \"reset\"))), React.createElement(\"div\", {\n        className: \"food-area \",\n        id: \"food-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, this.state.recipes.length == 0 && this.state.searchAttempted && React.createElement(\"div\", {\n        className: \"no-results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"100px\",\n        src: \"https://cdn4.iconfinder.com/data/icons/emojis-flat-pixel-perfect/64/emoji-56-512.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"Ouch!! Add more to your bag of groceries to find a new world of super tasty recipes!\"), React.createElement(\"div\", {\n        className: \"no-results-suggestion\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"100px\",\n        src: \"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, \"Go back Home\")), React.createElement(\"div\", {\n        className: \"no-results-suggestion\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"100px\",\n        src: \"http://www.iconarchive.com/download/i87956/icons8/ios7/Ecommerce-Shopping-Cart-Loaded.ico\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"Add Ingredients\")), React.createElement(\"div\", {\n        className: \"no-results-suggestion\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"100px\",\n        src: \"https://static.thenounproject.com/png/1467471-200.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, \"We'll be ready with your recipes\"))), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, this.state.recipes && renderRecipes, React.createElement(\"ul\", {\n        id: \"page-numbers\",\n        className: \"page-numbers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }))))))));\n    }\n  }]);\n\n  return SearchRecipesByIngredients;\n}(React.Component);\n\nexport default SearchRecipesByIngredients;","map":{"version":3,"sources":["/Users/ronn/Desktop/HackUMass/StressThing/src/components/recipes/SearchRecipesByIngredients.js"],"names":["React","RegularUserServices","RecipeCard","MealDBServices","RecipeServices","getFromStorage","UserServices","Link","NoResults","SearchRecipesByIngredients","props","handleClick","event","setState","currentPage","Number","target","id","findRecipesByIngredient","ingredients","foundRecipes","map","ingredient","mealDBServices","name","toLowerCase","then","r","meals","recipe","recipes","searchAttempted","findAllCuisines","filterCategory","findAllCategories","findRecipesByCategory","category","filteredresult","regularUserServices","findOwnRecipes","state","userId","strCategory","push","findRecipesByCuisine","cuisine","findRecipesByCuisines","sortAscend","unsortedRecipes","sortedRecipes","sort","compareAsc","sorted","findAllRecipes","sortDescend","dummy","console","log","compareDesc","resetSort","deleteRecipe","recipeId","recipeServices","deleteOwnRecipe","searchChanged","searchRecipe","value","userServices","match","params","document","title","obj","token","verifyUser","json","success","window","location","href","findOwnIngredients","a","b","recipeA","strMeal","toUpperCase","recipeB","comparison","recipesPerPage","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","renderRecipes","ownedBy","pageNumbers","i","Math","ceil","length","renderPageNumbers","number","user","Component"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport RecipeCard from \"../LandingPage/RecipeCard\";\nimport '../../assets/landingpage/css/sidebar.css'\nimport '../Explore/Explore.css'\nimport MealDBServices from \"../../services/MealDBServices\";\nimport RecipeServices from \"../../services/RecipeServices\";\nimport {getFromStorage} from \"../../utils/storage\";\nimport UserServices from \"../../services/UserServices\";\nimport {Link} from \"react-router-dom\";\nimport {NoResults} from \"../LandingPage/NoResults\";\n\nclass SearchRecipesByIngredients extends React.Component {\n    constructor(props) {\n        super(props);\n        this.mealDBServices = new MealDBServices();\n        this.regularUserServices = new RegularUserServices();\n        this.recipeServices = new RecipeServices();\n        this.userServices=new UserServices()\n        this.state = {\n            ingredients: [],\n            userId: this.props.match.params.userId,\n            recipes: [],\n            searchAttempted:false\n        };\n\n        //this.searchRecipe = this.searchRecipe.bind(this);\n\n    }\n\n    componentWillMount() {\n        document.title = \"Find Recipes\";\n        const obj = getFromStorage('project_april');\n        if (obj && obj.token) {\n            const { token } = obj;\n            this.userServices.verifyUser(token).then(json => {\n                if(!json.success){\n                    window.location.href='/';\n                }\n                else if(json.success){\n                    this.regularUserServices.findOwnIngredients(this.state.userId)\n                        .then(ingredients => {\n                            this.setState\n                            ({\n                                ingredients: ingredients\n                            })\n                        });\n                }\n            });\n        }\n    }\n\n\n    handleClick = event => {\n        return this.setState({\n            currentPage: Number(event.target.id)\n        })\n    }\n\n    findRecipesByIngredient = (ingredients) => {\n        var foundRecipes = []\n        ingredients.map(ingredient => {\n            this.mealDBServices.findRecipesByIngredient(ingredient.name.toLowerCase()).then(\n                r => {\n                    r.meals&&r.meals.map(recipe => {\n                            foundRecipes = [...foundRecipes, recipe];\n                        }\n                    )\n\n                return foundRecipes;\n                }\n            ).then(recipes => {\n                this.setState({\n                    recipes: recipes,\n                    searchAttempted:true\n                })\n            })\n        })\n\n                this.setState({\n\n                    searchAttempted:true\n                })\n\n    }\n\n    findAllCuisines = () => {\n        this.mealDBServices.findAllCuisines()\n            .then(filterCategory => {\n                this.setState\n                ({filterCategory: filterCategory.meals})\n            });\n    }\n\n    findAllCategories = () => {\n        this.mealDBServices.findAllCategories()\n            .then(filterCategory => {\n                this.setState\n                ({filterCategory: filterCategory.meals})\n            });\n    }\n\n    findRecipesByCategory = (category) => {\n        var filteredresult = [];\n        // var recipes=this.state.recipes;\n        // this.setState\n        // ({\n        //     unsortedRecipes: recipes\n        // })\n        this.regularUserServices.findOwnRecipes(this.state.userId)\n            .then(recipes => {\n                recipes.map(recipe => {\n                    if (recipe.strCategory ? recipe.strCategory === category : (recipe.category === category))\n                        filteredresult.push(recipe);\n                })\n                this.setState\n                ({\n                    recipes: filteredresult\n                })\n            });\n\n    }\n\n    findRecipesByCuisine = (cuisine) => {\n        this.mealDBServices.findRecipesByCuisines(cuisine)\n            .then(recipes => {\n                this.setState\n                ({recipes: recipes.meals})\n            });\n    }\n\n    compareAsc(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n        const recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n\n        let comparison = 0;\n        if (recipeA > recipeB) {\n            comparison = 1;\n        } else if (recipeA < recipeB) {\n            comparison = -1;\n        }\n        return comparison;\n    }\n\n    compareDesc(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const recipeA = a.strMeal ? a.strMeal.toUpperCase() : a.name.toUpperCase();\n        const recipeB = b.strMeal ? b.strMeal.toUpperCase() : b.name.toUpperCase();\n\n        let comparison = 0;\n        if (recipeA > recipeB) {\n            comparison = 1;\n        } else if (recipeA < recipeB) {\n            comparison = -1;\n        }\n        return comparison * -1;\n    }\n\n    sortAscend = () => {\n        var unsortedRecipes = this.state.recipes;\n        const sortedRecipes = unsortedRecipes.sort(this.compareAsc);\n\n        this.setState\n        ({\n            recipes: sortedRecipes,\n            sorted: 1\n        })\n        this.mealDBServices.findAllRecipes()\n            .then(recipes => {\n                this.setState\n                ({\n\n                    unsortedRecipes: recipes.meals\n                })\n            });\n    };\n\n    sortDescend = () => {\n        var dummy = this.state.recipes;\n        // const unsortedRecipes=this.state.recipes;\n        console.log()\n        const sortedRecipes = dummy.sort(this.compareDesc);\n\n        this.setState\n        ({\n            recipes: sortedRecipes,\n            sorted: 1\n        })\n        this.mealDBServices.findAllRecipes()\n            .then(recipes => {\n                this.setState\n                ({\n\n                    unsortedRecipes: recipes.meals\n                })\n            });\n    };\n\n    resetSort = () => {\n        if(this.state.searchAttempted)\n            this.findRecipesByIngredient(this.state.ingredients)\n        else{\n            this.setState({\n                    searchAttempted: false\n                }\n            )\n        }\n\n    }\n\n    deleteRecipe = (recipeId) => {\n        this.recipeServices.deleteRecipe(recipeId)\n            .then(this.regularUserServices.deleteOwnRecipe(this.state.userId, recipeId)\n                .then(this.regularUserServices.findOwnRecipes(this.state.userId)\n                    .then(recipes => {\n                        this.setState\n                        ({\n                            recipes: recipes.meals ? recipes.meals : recipes\n                        })\n                    })))\n    }\n\n\n    searchChanged = (event) => {\n        this.setState(\n            {\n                searchRecipe: event.target.value\n            });\n    };\n\n    render() {\n        const {recipes, currentPage, recipesPerPage} = this.state;\n\n        // Logic for displaying todos\n        const indexOfLastRecipe = currentPage * recipesPerPage;\n        const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n        const currentRecipes = recipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n        const renderRecipes = this.state.recipes.map(recipe => {\n            return <RecipeCard recipeOwner={recipe.ownedBy?recipe.ownedBy:\"Anonymous\"} popularRecipe={recipe}\n                               deleteRecipe={this.deleteRecipe}\n                               loggedIn={true}/>\n        });\n\n        // Logic for displaying page numbers\n        const pageNumbers = [];\n        for (let i = 1; i <= Math.ceil(recipes.length / recipesPerPage); i++) {\n            pageNumbers.push(i);\n        }\n\n        const renderPageNumbers = pageNumbers.map(number => {\n            return (\n                <li className='horizontal-li'\n                    key={number}\n                    id={number}\n                    onClick={this.handleClick}>\n                    &nbsp;&nbsp;&nbsp;<label className='hover-underline'>{number}</label>\n                </li>\n            );\n        });\n\n        return (\n\n            <div>\n                {/*<LandingPageHeader/>*/}\n                <div id=\"header\">\n                    {/*<HomePageNav/>*/}\n                </div>\n                <div>\n                    <section className=\"table-area section-padding\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-lg-12\">\n                                    <div className=\"section-top2 text-center\">\n                                        <h3>Find <span>Recipes</span></h3>\n                                        <p><i>Time to get into a yummilicious world. <span>Click</span> on the <span>button</span> below to find recipes matching you grocery stock!</i></p>\n                                        <p className=\"text-white link-nav\"><Link className=\"text-white link-nav\" to='/home'>Home </Link> <span\n                                            className=\"lnr lnr-arrow-right\"></span>\n                                            <Link className=\"text-white link-nav\" to={`/user/${this.state.user}/findrecipes`}>Let's Cook</Link>\n                                        </p>\n                                    </div>\n                                    <div className=\"table-btn text-center\">\n                                        <a href=\"#\" className=\"template-btn template-btn2 mt-4\"\n                                           onClick={() => this.findRecipesByIngredient(this.state.ingredients)}>Get Recipes</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n                </div>\n\n                <section className=\"header\">\n                    <div className=\"row wrap\">\n                        <div className=\"split fleft\">\n                            <div className={\"side-menu\"}>\n                                <div className=\"\">\n\n                                    <div className=\"sidebar-categories\">\n                                        <div className=\"head\">Available Groceries</div>\n                                        <ul className=\"main-categories\">\n\n\n                                            {this.state.ingredients.map(ingredient =>\n                                                <li className=\"main-nav-list child\"><a href=\"#\"\n\n                                                                                       tabIndex=\"1\">{ingredient.name}<span\n                                                    className=\"number\"></span></a></li>)\n                                            }\n\n\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"split fright\">\n\n                            <div className=\"filter-bar d-flex flex-wrap align-items-center\">\n                                <div className=\"sorting\">\n\n                                </div>\n                                <div className=\"sorting mr-auto\">\n                                    <div className=\"pagination\">\n\n\n                                    </div>\n                                </div>\n\n\n                                <div className=\"pagination\">\n                                    <a href=\"#\" className=\"prev-arrow head\" onClick={this.sortAscend}><i\n                                        className=\"fa fa-sort-alpha-asc\"\n                                        aria-hidden=\"true\"></i></a>\n                                    <a href=\"#\" className=\"next-arrow head\" onClick={this.sortDescend}><i\n                                        className=\"fa fa-sort-alpha-desc\"\n                                        aria-hidden=\"true\"></i></a>\n\n                                    <a href=\"#\" onClick={this.resetSort}>reset</a>\n                                </div>\n                            </div>\n\n\n                            <div className=\"food-area \" id={\"food-area\"}>\n                                {this.state.recipes.length==0 && this.state.searchAttempted &&<div className=\"no-results\">\n                                    <img width={\"100px\"}  src=\"https://cdn4.iconfinder.com/data/icons/emojis-flat-pixel-perfect/64/emoji-56-512.png\"/>\n                                    <h3>Ouch!! Add more to your bag of groceries to find a new world of super tasty recipes!</h3>\n                                    <div className=\"no-results-suggestion\">\n                                        <img width={\"100px\"} src=\"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\"/>\n                                        <span>Go back Home</span>\n                                    </div>\n                                    <div className=\"no-results-suggestion\">\n                                        <img width={\"100px\"}  src=\"http://www.iconarchive.com/download/i87956/icons8/ios7/Ecommerce-Shopping-Cart-Loaded.ico\"/>\n                                        <span>Add Ingredients</span></div>\n                                    <div className=\"no-results-suggestion\">\n                                        <img width={\"100px\"}src=\"https://static.thenounproject.com/png/1467471-200.png\"/>\n                                        <span>We'll be ready with your recipes</span></div>\n                                    {/*</PopularRecipes popularRecipes={this.state.popularRecipes}>*/}\n                                </div>}\n                                <div className=\"container\">\n                                    <div className=\"row\">\n                                        {this.state.recipes && renderRecipes}\n                                        <ul id=\"page-numbers\" className=\"page-numbers\">\n                                            {/*{renderPageNumbers}*/}\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n            </div>\n        )\n    }\n}\n\nexport default SearchRecipesByIngredients;\n"]},"metadata":{},"sourceType":"module"}