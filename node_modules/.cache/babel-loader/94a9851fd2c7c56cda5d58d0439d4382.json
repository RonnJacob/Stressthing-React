{"ast":null,"code":"import _classCallCheck from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jessding/Downloads/HackUMass/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jessding/Downloads/HackUMass/src/components/recipes/RecipeDetails.js\";\nimport React, { Component } from 'react';\nimport '../../assets/css/linearicons.css';\nimport '../../assets/css/magnific-popup.css';\nimport '../../assets/css/nice-select.css';\nimport '../../assets/css/animate.min.css';\nimport '../../assets/css/main.css';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport ReactTooltip from 'react-tooltip';\nimport { faPlus, faTimes, faPencilAlt, faCheck, faUtensils, faMedkit, faHeart as solidHeart, faThumbsUp as solidThumbsUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHeart as emptyHeart, faThumbsUp as emptyThumbsUp } from \"@fortawesome/free-regular-svg-icons\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { BrowserRouter as Router, Link, Route, Redirect } from \"react-router-dom\";\nimport HomePageNav from '../HomePageNav/HomePageNav';\nimport RecipeServices from \"../../services/RecipeServices\";\nimport UserServices from \"../../services/UserServices\";\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport NutritionistServices from \"../../services/NutritionistServices\";\nimport ChefServices from \"../../services/ChefServices\";\nimport { getFromStorage } from \"../../utils/storage\";\nimport MealDBServices from \"../../services/MealDBServices\";\nimport { Button, Modal } from \"react-bootstrap\";\nlibrary.add(faPlus, faTimes, faPencilAlt, faCheck, emptyHeart, solidHeart, solidThumbsUp, emptyThumbsUp, faUtensils, faMedkit);\n\nvar RecipeDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RecipeDetails, _Component);\n\n  function RecipeDetails(props) {\n    var _this;\n\n    _classCallCheck(this, RecipeDetails);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecipeDetails).call(this, props));\n\n    _this.renderAllFields = function (updateValue, detail, updatedFieldVisibility) {\n      var currentRecipe = {};\n      var currentUser = {};\n      var currentUserName = '';\n      var endorsedByChef = [];\n      var endorsedByNutritionist = [];\n      (_this.state.recipeId.length > 5 ? _this.recipeService.findRecipeById(_this.state.recipeId) : _this.mealDbService.findRecipeById(_this.state.recipeId)).then(function (recipe) {\n        var ingredientArray = '';\n        var ingredients;\n        recipe.ingredients ? ingredients = recipe.ingredients.join(',') : ingredients = recipe.meals[0].strIngredient1 + ',' + recipe.meals[0].strIngredient2 + ',' + recipe.meals[0].strIngredient3 + ',' + recipe.meals[0].strIngredient4 + ',' + recipe.meals[0].strIngredient5;\n\n        if (_this.state.recipeId.length > 5) {\n          currentRecipe = recipe;\n          currentRecipe.ingredients = ingredients;\n        } else {\n          currentRecipe.name = recipe.name ? recipe.name : recipe.meals[0].strMeal;\n          currentRecipe.ingredients = ingredients;\n          currentRecipe.steps = recipe.steps ? recipe.steps : recipe.meals[0].strInstructions;\n          currentRecipe.image = recipe.image ? recipe.image : recipe.meals[0].strMealThumb;\n          currentRecipe.endorsedByChef = recipe.endorsedByChef;\n          currentRecipe.endorsedByNutritionist = recipe.endorsedByNutritionist;\n          currentRecipe.ownedBy = \"Anonymous\";\n        }\n      }).then(function () {\n        if (currentRecipe.endorsedByChef) {\n          var chefNames = [];\n          currentRecipe.endorsedByChef.map(function (e) {\n            _this.userServices.findById(e).then(function (user) {\n              // this.state.chefIds.push(user._id)\n              // this.state.endorsedByChef.push(user.firstName)\n              _this.state.endorsedByChef.push(user);\n\n              if (user._id === _this.state.userId) {\n                _this.updateButtonStatus();\n              }\n            });\n          });\n        }\n\n        if (currentRecipe.endorsedByNutritionist) {\n          var nutritionistNames = [];\n          currentRecipe.endorsedByNutritionist.map(function (e) {\n            _this.userServices.findById(e).then(function (user) {\n              // this.state.nutritionistIds.push(user._id)\n              // this.state.endorsedByNutritionist.push(user.firstName)\n              _this.state.endorsedByNutritionist.push(user);\n\n              if (user._id === _this.state.userId) {\n                _this.updateButtonStatus();\n              }\n            });\n          });\n        }\n      }).then(function () {\n        if (currentRecipe.ownedBy != \"Anonymous\") return _this.userServices.findById(currentRecipe.ownedBy);else return currentRecipe.ownedBy;\n      }).then(function (user) {\n        if (user) {\n          currentUser = user ? user : {};\n          currentUserName = user.firstName ? user.firstName : \"\";\n        }\n      }).then(function () {\n        endorsedByChef = _this.state.endorsedByChef.filter(function (thing, index) {\n          return index === _this.state.endorsedByChef.findIndex(function (obj) {\n            return JSON.stringify(obj) === JSON.stringify(thing);\n          });\n        });\n      }).then(function () {\n        endorsedByNutritionist = _this.state.endorsedByNutritionist.filter(function (thing, index) {\n          return index === _this.state.endorsedByNutritionist.findIndex(function (obj) {\n            return JSON.stringify(obj) === JSON.stringify(thing);\n          });\n        });\n      }).then(function () {\n        return _this.setState({\n          recipe: currentRecipe,\n          owner: currentUser,\n          ownerName: currentUserName,\n          endorsedByChef: endorsedByChef,\n          endorsedByNutritionist: endorsedByNutritionist,\n          updateValue: updateValue,\n          detail: detail,\n          updatedFieldVisibility: updatedFieldVisibility\n        });\n      });\n    };\n\n    _this.valueChanged = function (event) {\n      _this.renderAllFields(event.target.value, _this.state.detail, 'd-block');\n    };\n\n    _this.toggleAction = function () {\n      if (_this.state.userType === 'REGULAR') {\n        if (!_this.state.isActioned) {\n          _this.regularUserServices.favoriteRecipe(_this.state.userId, _this.state.recipeId).then(function () {\n            return _this.setState({\n              defaultButtonIcon: ['fas', 'heart'],\n              isActioned: true\n            });\n          }).then(function () {\n            return alert(\"Added to your Favorites successfully!\");\n          });\n        } else {\n          _this.regularUserServices.removeFavorite(_this.state.userId, _this.state.recipeId).then(function () {\n            return _this.setState({\n              defaultButtonIcon: ['far', 'heart'],\n              isActioned: false\n            });\n          }).then(function () {\n            return alert(\"Removed from your Favorites successfully!\");\n          });\n        }\n      } else if (_this.state.userType === 'CHEF') {\n        if (!_this.state.isActioned) _this.chefServices.endorseRecipe(_this.state.userId, _this.state.recipeId).then(function () {\n          return _this.setState({\n            defaultButtonIcon: ['fas', 'thumbs-up'],\n            isActioned: true\n          });\n        }).then(function () {\n          return alert(\"Added to your Endorsed successfully!\");\n        });else _this.chefServices.removeEndorsed(_this.state.userId, _this.state.recipeId).then(function () {\n          return _this.setState({\n            defaultButtonIcon: ['far', 'thumbs-up'],\n            isActioned: false\n          });\n        }).then(function () {\n          return alert(\"Removed from your Endorsed successfully!\");\n        });\n      } else {\n        if (!_this.state.isActioned) _this.nutritionistServices.endorseRecipe(_this.state.userId, _this.state.recipeId).then(function () {\n          return _this.setState({\n            defaultButtonIcon: ['fas', 'thumbs-up'],\n            isActioned: true\n          });\n        }).then(function () {\n          return alert(\"Added to your Endorsed successfully!\");\n        });else _this.nutritionistServices.removeEndorsed(_this.state.userId, _this.state.recipeId).then(function () {\n          return _this.setState({\n            defaultButtonIcon: ['far', 'thumbs-up'],\n            isActioned: false\n          });\n        }).then(function () {\n          return alert(\"Removed from your Endorsed successfully!\");\n        });\n      }\n    };\n\n    _this.updateIngredient = function () {\n      var recipe = JSON.parse(JSON.stringify(_this.state.recipe));\n      if (_this.state.detail === 'ingredients') recipe.ingredients = _this.state.updateValue.split(',').map(function (item) {\n        return item.trim();\n      });else recipe[\"\".concat(_this.state.detail)] = _this.state.updateValue;\n\n      _this.recipeService.updateRecipe(_this.state.recipeId, recipe).then(function () {\n        return _this.renderAllFields('', '', 'd-none');\n      }).then(function () {\n        _this.setState({\n          message: 'Recipe updated successfully',\n          messageBox: true\n        });\n      });\n    };\n\n    _this.handleCloseMessageBox = function () {\n      _this.setState({\n        message: '',\n        messageBox: false\n      });\n    };\n\n    _this.selectNameForUpdate = function (recipeName) {\n      return _this.renderAllFields(recipeName, 'name', 'd-block');\n    };\n\n    _this.selectIngredientsForUpdate = function (recipeIngredients) {\n      return _this.renderAllFields(recipeIngredients, 'ingredients', 'd-block');\n    };\n\n    _this.selectStepsForUpdate = function (recipeSteps) {\n      return _this.renderAllFields(recipeSteps, 'steps', 'd-block');\n    };\n\n    _this.selectImageForUpdate = function (recipeImage) {\n      return _this.renderAllFields(recipeImage, 'image', 'd-block');\n    };\n\n    _this.recipeService = new RecipeServices();\n    _this.mealDbService = new MealDBServices();\n    _this.userServices = new UserServices();\n    _this.regularUserServices = new RegularUserServices();\n    _this.nutritionistServices = new NutritionistServices();\n    _this.chefServices = new ChefServices();\n    var recipeId = props.match.params['recipeId'];\n\n    var _obj = getFromStorage('project_april');\n\n    var defaultTooltip = '';\n    var defaultButtonIcon = [];\n\n    if (_obj && _obj.user[0] ? _obj.user[0].userType === 'REGULAR' : '') {\n      defaultButtonIcon = ['far', 'heart'];\n      defaultTooltip = '  Favorite this Recipe!';\n    } else {\n      defaultButtonIcon = ['far', 'thumbs-up'];\n      defaultTooltip = 'Endorse this Recipe!';\n    }\n\n    _this.state = {\n      userId: _obj && _obj.user[0] ? _obj.user[0]._id : '',\n      userType: _obj && _obj.user[0] ? _obj.user[0].userType : '',\n      recipeId: recipeId,\n      recipe: {},\n      updateValue: '',\n      detail: '',\n      owner: {},\n      ownerName: '',\n      endorsedByChef: [],\n      endorsedByNutritionist: [],\n      updatedFieldVisibility: 'd-none',\n      defaultButtonIcon: defaultButtonIcon,\n      defaultActionTooltip: defaultTooltip,\n      isActioned: '',\n      message: '',\n      messageBox: false,\n      loggedIn: false\n    };\n    return _this;\n  }\n\n  _createClass(RecipeDetails, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      document.title = \"What's Cooking?\";\n      this.renderAllFields('', '', 'd-none');\n      var obj = getFromStorage('project_april');\n\n      if (obj && obj.token) {\n        var token = obj.token;\n        this.userServices.verifyUser(token).then(function (json) {\n          console.log(json);\n\n          if (json.success) {\n            // alert(\"updated\"+courses.length)\n            _this2.setState({\n              token: token,\n              user: obj.user[0],\n              loggedIn: true\n            });\n          }\n        }).then(function () {\n          return _this2.updateButtonStatus();\n        });\n      }\n    }\n  }, {\n    key: \"updateButtonStatus\",\n    value: function updateButtonStatus() {\n      var _this3 = this;\n\n      var r = this.state.recipeId;\n\n      if (this.state.userType === 'REGULAR') {\n        console.log(this.state.userId);\n        console.log(this.state.recipeId);\n        this.regularUserServices.findFavoriteRecipeId(this.state.userId).then(function (recipeIds) {\n          if (recipeIds.indexOf(r) !== -1) {\n            _this3.setState({\n              defaultButtonIcon: ['fas', 'heart'],\n              isActioned: true\n            });\n          } else {\n            _this3.setState({\n              defaultButtonIcon: ['far', 'heart'],\n              isActioned: false\n            });\n          }\n        });\n      } else if (this.state.userType === 'CHEF') {\n        console.log(this.state.userId);\n        console.log(this.state.recipeId);\n        this.chefServices.findEndorsedRecipeId(this.state.userId).then(function (recipeIds) {\n          if (recipeIds.indexOf(_this3.state.recipeId) !== -1) {\n            _this3.setState({\n              defaultButtonIcon: ['fas', 'thumbs-up'],\n              isActioned: true\n            });\n          } else {\n            _this3.setState({\n              defaultButtonIcon: ['far', 'thumbs-up'],\n              isActioned: false\n            });\n          }\n        });\n      } else if (this.state.userType === 'NUTRITIONIST') {\n        console.log(this.state.userId);\n        console.log(this.state.recipeId);\n        this.nutritionistServices.findEndorsedRecipeId(this.state.userId).then(function (recipeIds) {\n          if (recipeIds.indexOf(_this3.state.recipeId) !== -1) {\n            _this3.setState({\n              defaultButtonIcon: ['fas', 'thumbs-up'],\n              isActioned: true\n            });\n          } else {\n            _this3.setState({\n              defaultButtonIcon: ['far', 'thumbs-up'],\n              isActioned: false\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var updatedValue;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }), React.createElement(\"section\", {\n        className: \"about-banner relative\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"overlay overlay-bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row d-flex align-items-center justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"about-content col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"section-top2 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        style: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Recipe\"), \"Details\"), React.createElement(\"p\", {\n        className: \"text-white link-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(Link, {\n        className: \"text-white link-nav\",\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"Back Home \"))))))), React.createElement(\"section\", {\n        className: \"home-about-area section-gap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"mb-5 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, \"Recipe Details\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, \"\\xA0\\xA0\", React.createElement(\"a\", {\n        className: \"hand-cursor\",\n        onClick: this.toggleAction,\n        \"data-tip\": this.state.defaultActionTooltip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, this.state.loggedIn && (this.state.userType === 'REGULAR' && React.createElement(FontAwesomeIcon, {\n        icon: this.state.defaultButtonIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }) || (this.state.userType === 'CHEF' || this.state.userType === 'NUTRITIONIST') && React.createElement(FontAwesomeIcon, {\n        icon: this.state.defaultButtonIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-7 home-about-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"table-responsive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"groceries table table-bordered table-hover\",\n        id: \"grocery_table\",\n        style: {\n          tableLayout: \"\",\n          borderCollapse: \"collapse\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, \"Item\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }, \"Detail\"), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"td\", {\n        style: {\n          wordWrap: \"breakWord\"\n        },\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, this.state.recipe.name), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"td\", {\n        className: \"actions-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          return _this4.selectNameForUpdate(_this4.state.recipe.name);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"pencil-alt\",\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }))))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, \"Ingredients\"), React.createElement(\"td\", {\n        style: {\n          wordWrap: \"breakWord\"\n        },\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, this.state.recipe.ingredients), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"td\", {\n        className: \"actions-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          return _this4.selectIngredientsForUpdate(_this4.state.recipe.ingredients);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"pencil-alt\",\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }))))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, \"Steps\"), React.createElement(\"td\", {\n        style: {\n          wordWrap: \"breakWord\"\n        },\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }, this.state.recipe.steps), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"td\", {\n        className: \"actions-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          return _this4.selectStepsForUpdate(_this4.state.recipe.steps);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"pencil-alt\",\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }))))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, \"Image\"), React.createElement(\"td\", {\n        style: {\n          wordWrap: \"breakWord\",\n          width: \"100px\"\n        },\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450\n        },\n        __self: this\n      }, this.state.recipe.image), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"td\", {\n        className: \"actions-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: function onClick() {\n          return _this4.selectImageForUpdate(_this4.state.recipe.image);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"pencil-alt\",\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }))))), this.state.ownerName && React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, \"Owned By\"), React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, this.state.ownerName)), (this.state.endorsedByChef.length != 0 || this.state.endorsedByNutritionist.length != 0) && React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"name-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }, \"Endorsed By\"), React.createElement(\"td\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472\n        },\n        __self: this\n      }, this.state.endorsedByChef.length != 0 && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row endorsed-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faUtensils,\n        className: \"fas\",\n        \"data-tip\": \"Chefs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      })), this.state.endorsedByChef.map(function (e) {\n        return React.createElement(\"div\", {\n          className: \"row endorsed-theader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/profile/CHEF/\".concat(e._id),\n          className: \"hand-cursor\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488\n          },\n          __self: this\n        }, e.firstName));\n      })), this.state.endorsedByNutritionist.length != 0 && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row endorsed-theader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faMedkit,\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497\n        },\n        __self: this\n      })), this.state.endorsedByNutritionist.map(function (e) {\n        return React.createElement(\"div\", {\n          className: \"row endorsed-theader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 501\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/profile/NUTRITIONIST/\".concat(e._id),\n          className: \"hand-cursor\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 502\n          },\n          __self: this\n        }, e.firstName));\n      })))), React.createElement(\"tr\", {\n        className: \"full-width red-border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\".concat(this.state.updatedFieldVisibility),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"text-red font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517\n        },\n        __self: this\n      }, \"Change ->\"))), React.createElement(\"td\", {\n        className: \"text-red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\".concat(this.state.updatedFieldVisibility),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"full-width no-input-border\",\n        value: this.state.updateValue,\n        onChange: this.valueChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }))), this.state.ownerName.length > 0 && this.state.owner._id === this.state.userId && React.createElement(\"td\", {\n        className: \"actions-theader \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\".concat(this.state.updatedFieldVisibility),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"text-red\",\n        onClick: this.updateIngredient,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"check\",\n        className: \"fas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      })))))))))), React.createElement(\"div\", {\n        className: \"col-lg-4 home-about-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, this.state.recipe.image !== '' && React.createElement(\"img\", {\n        width: \"500px\",\n        height: \"400px\",\n        src: this.state.recipe.image,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }) || React.createElement(\"img\", {\n        src: require('./about-img.jpg'),\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      }))))), React.createElement(Modal, {\n        show: this.state.messageBox,\n        onHide: this.handleCloseMessageBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      }, \"Yay!\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, this.state.message), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleCloseMessageBox,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556\n        },\n        __self: this\n      }, \"Ok\"))), React.createElement(ReactTooltip, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RecipeDetails;\n}(Component);\n\nexport default RecipeDetails;","map":{"version":3,"sources":["/Users/jessding/Downloads/HackUMass/src/components/recipes/RecipeDetails.js"],"names":["React","Component","FontAwesomeIcon","ReactTooltip","faPlus","faTimes","faPencilAlt","faCheck","faUtensils","faMedkit","faHeart","solidHeart","faThumbsUp","solidThumbsUp","emptyHeart","emptyThumbsUp","library","BrowserRouter","Router","Link","Route","Redirect","HomePageNav","RecipeServices","UserServices","RegularUserServices","NutritionistServices","ChefServices","getFromStorage","MealDBServices","Button","Modal","add","RecipeDetails","props","renderAllFields","updateValue","detail","updatedFieldVisibility","currentRecipe","currentUser","currentUserName","endorsedByChef","endorsedByNutritionist","state","recipeId","length","recipeService","findRecipeById","mealDbService","then","recipe","ingredientArray","ingredients","join","meals","strIngredient1","strIngredient2","strIngredient3","strIngredient4","strIngredient5","name","strMeal","steps","strInstructions","image","strMealThumb","ownedBy","chefNames","map","e","userServices","findById","user","push","_id","userId","updateButtonStatus","nutritionistNames","firstName","filter","thing","index","findIndex","obj","JSON","stringify","setState","owner","ownerName","valueChanged","event","target","value","toggleAction","userType","isActioned","regularUserServices","favoriteRecipe","defaultButtonIcon","alert","removeFavorite","chefServices","endorseRecipe","removeEndorsed","nutritionistServices","updateIngredient","parse","split","item","trim","updateRecipe","message","messageBox","handleCloseMessageBox","selectNameForUpdate","recipeName","selectIngredientsForUpdate","recipeIngredients","selectStepsForUpdate","recipeSteps","selectImageForUpdate","recipeImage","match","params","defaultTooltip","defaultActionTooltip","loggedIn","document","title","token","verifyUser","json","console","log","success","r","findFavoriteRecipeId","recipeIds","indexOf","findEndorsedRecipeId","updatedValue","color","tableLayout","borderCollapse","wordWrap","width","require"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport '../../assets/css/linearicons.css'\nimport '../../assets/css/magnific-popup.css'\nimport '../../assets/css/nice-select.css'\nimport '../../assets/css/animate.min.css'\nimport '../../assets/css/main.css'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport ReactTooltip from 'react-tooltip'\n\nimport {\n    faPlus,\n    faTimes,\n    faPencilAlt,\n    faCheck,\n    faUtensils,\n    faMedkit,\n    faHeart as solidHeart,\n    faThumbsUp as solidThumbsUp\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {faHeart as emptyHeart, faThumbsUp as emptyThumbsUp} from \"@fortawesome/free-regular-svg-icons\";\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\nimport {BrowserRouter as Router, Link, Route, Redirect} from \"react-router-dom\";\nimport HomePageNav from '../HomePageNav/HomePageNav'\nimport RecipeServices from \"../../services/RecipeServices\";\nimport UserServices from \"../../services/UserServices\";\nimport RegularUserServices from \"../../services/RegularUserServices\";\nimport NutritionistServices from \"../../services/NutritionistServices\";\nimport ChefServices from \"../../services/ChefServices\";\nimport {getFromStorage} from \"../../utils/storage\";\nimport MealDBServices from \"../../services/MealDBServices\";\nimport {Button, Modal} from \"react-bootstrap\";\n\nlibrary.add(faPlus, faTimes, faPencilAlt, faCheck, emptyHeart, solidHeart, solidThumbsUp, emptyThumbsUp, faUtensils, faMedkit);\n\nclass RecipeDetails extends Component {\n    constructor(props) {\n        super(props);\n        this.recipeService = new RecipeServices();\n        this.mealDbService = new MealDBServices();\n        this.userServices = new UserServices();\n        this.regularUserServices = new RegularUserServices();\n        this.nutritionistServices = new NutritionistServices();\n        this.chefServices = new ChefServices();\n        const recipeId = props.match.params['recipeId'];\n        const obj = getFromStorage('project_april');\n        let defaultTooltip = '';\n        let defaultButtonIcon = [];\n        if ((obj &&obj.user[0])?obj.user[0].userType === 'REGULAR':'') {\n            defaultButtonIcon = ['far', 'heart'];\n            defaultTooltip = '  Favorite this Recipe!'\n        } else {\n            defaultButtonIcon = ['far', 'thumbs-up'];\n            defaultTooltip = 'Endorse this Recipe!'\n        }\n\n        this.state = {\n            userId: (obj &&obj.user[0])?obj.user[0]._id:'',\n            userType: obj &&obj.user[0]?obj.user[0].userType:'',\n            recipeId: recipeId,\n            recipe: {},\n            updateValue: '',\n            detail: '',\n            owner: {},\n            ownerName: '',\n            endorsedByChef: [],\n            endorsedByNutritionist: [],\n            updatedFieldVisibility: 'd-none',\n            defaultButtonIcon: defaultButtonIcon,\n            defaultActionTooltip: defaultTooltip,\n            isActioned: '',\n            message: '',\n            messageBox: false,\n            loggedIn: false\n        }\n    }\n\n    componentWillMount() {\n        document.title = \"What's Cooking?\";\n        this.renderAllFields('', '', 'd-none');\n        const obj = getFromStorage('project_april');\n        if (obj && obj.token) {\n            const { token } = obj;\n            this.userServices.verifyUser(token).then(json => {\n                console.log(json);\n                if (json.success) {\n                    // alert(\"updated\"+courses.length)\n                    this.setState({\n                        token,\n                        user: obj.user[0],\n                        loggedIn: true\n                    });\n                }\n            }).then(()=>this.updateButtonStatus());\n        }\n\n    }\n\n    renderAllFields = (updateValue, detail, updatedFieldVisibility) => {\n        let currentRecipe = {};\n        let currentUser = {};\n        let currentUserName = '';\n        let endorsedByChef = [];\n        let endorsedByNutritionist = [];\n        ((this.state.recipeId.length>5)?this.recipeService.findRecipeById(this.state.recipeId):this.mealDbService.findRecipeById(this.state.recipeId))\n            .then(recipe => {\n                let ingredientArray = '';\n                let ingredients;\n                recipe.ingredients ?\n                    (ingredients = recipe.ingredients.join(',')) :\n                    (ingredients = recipe.meals[0].strIngredient1 + ',' +\n                        recipe.meals[0].strIngredient2 + ',' +\n                        recipe.meals[0].strIngredient3 + ',' +\n                        recipe.meals[0].strIngredient4 + ',' +\n                        recipe.meals[0].strIngredient5);\n\n                if (this.state.recipeId.length > 5){\n                    currentRecipe = recipe;\n                    currentRecipe.ingredients = ingredients;\n                }\n\n\n\n                else {\n\n                currentRecipe.name = recipe.name ? recipe.name : recipe.meals[0].strMeal\n                currentRecipe.ingredients = ingredients;\n                currentRecipe.steps = recipe.steps ? recipe.steps : recipe.meals[0].strInstructions\n                currentRecipe.image = recipe.image ? recipe.image : recipe.meals[0].strMealThumb\n                currentRecipe.endorsedByChef = recipe.endorsedByChef\n                currentRecipe.endorsedByNutritionist = recipe.endorsedByNutritionist\n                currentRecipe.ownedBy = \"Anonymous\"\n                }\n\n                }\n            )\n            .then(() => {\n                if (currentRecipe.endorsedByChef) {\n                    let chefNames = [];\n                    currentRecipe.endorsedByChef.map(e => {\n                        this.userServices.findById(e)\n                            .then(user => {\n                                // this.state.chefIds.push(user._id)\n                                // this.state.endorsedByChef.push(user.firstName)\n                                this.state.endorsedByChef.push(user)\n                                if(user._id===this.state.userId){\n                                    this.updateButtonStatus();\n                                }\n                            })\n                    })\n                }\n                if (currentRecipe.endorsedByNutritionist) {\n                    let nutritionistNames = [];\n                    currentRecipe.endorsedByNutritionist.map(e => {\n                        this.userServices.findById(e)\n                            .then(user => {\n                                // this.state.nutritionistIds.push(user._id)\n                                // this.state.endorsedByNutritionist.push(user.firstName)\n                                this.state.endorsedByNutritionist.push(user)\n                                if(user._id===this.state.userId){\n                                    this.updateButtonStatus();\n                                }\n                            })\n                    })\n                }\n            })\n            .then(() => {\n                if(currentRecipe.ownedBy!=\"Anonymous\")\n                return this.userServices.findById(currentRecipe.ownedBy)\n                else return currentRecipe.ownedBy})\n\n            .then(user => {\n                if (user) {\n                    currentUser = user?user:{};\n                    currentUserName = user.firstName?user.firstName:\"\"\n                }\n            })\n            .then(() => {\n                endorsedByChef = this.state.endorsedByChef.filter((thing, index) => {\n                    return index === this.state.endorsedByChef.findIndex(obj => {\n                        return JSON.stringify(obj) === JSON.stringify(thing);\n                    });\n                })\n            })\n            .then(() => {\n                endorsedByNutritionist = this.state.endorsedByNutritionist.filter((thing, index) => {\n                    return index === this.state.endorsedByNutritionist.findIndex(obj => {\n                        return JSON.stringify(obj) === JSON.stringify(thing);\n                    });\n                });\n            })\n            .then(() => this.setState({\n                recipe: currentRecipe,\n                owner: currentUser,\n                ownerName: currentUserName,\n                endorsedByChef: endorsedByChef,\n                endorsedByNutritionist: endorsedByNutritionist,\n                updateValue: updateValue,\n                detail: detail,\n                updatedFieldVisibility: updatedFieldVisibility\n            }))\n    }\n\n    valueChanged = (event) => {\n        this.renderAllFields(event.target.value, this.state.detail, 'd-block')\n    }\n\n    toggleAction = () => {\n        if (this.state.userType === 'REGULAR') {\n            if (!this.state.isActioned) {\n                this.regularUserServices.favoriteRecipe(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['fas', 'heart'],\n                        isActioned: true\n                    }))\n                    .then(() => alert(\"Added to your Favorites successfully!\"));\n            }\n            else{\n                this.regularUserServices.removeFavorite(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['far', 'heart'],\n                        isActioned: false\n                    }))\n                    .then(() => alert(\"Removed from your Favorites successfully!\"));\n            }\n\n        } else if (this.state.userType === 'CHEF') {\n            if (!this.state.isActioned)\n                this.chefServices.endorseRecipe(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['fas', 'thumbs-up'],\n                        isActioned: true\n                    }))\n                    .then(() => alert(\"Added to your Endorsed successfully!\"));\n            else\n                this.chefServices.removeEndorsed(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['far', 'thumbs-up'],\n                        isActioned: false\n                    }))\n                    .then(() => alert(\"Removed from your Endorsed successfully!\"));\n        } else {\n            if (!this.state.isActioned)\n                this.nutritionistServices.endorseRecipe(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['fas', 'thumbs-up'],\n                        isActioned: true\n                    }))\n                    .then(() => alert(\"Added to your Endorsed successfully!\"));\n            else\n                this.nutritionistServices.removeEndorsed(this.state.userId, this.state.recipeId)\n                    .then(() => this.setState({\n                        defaultButtonIcon: ['far', 'thumbs-up'],\n                        isActioned: false\n                    }))\n                    .then(() => alert(\"Removed from your Endorsed successfully!\"));\n        }\n\n    }\n\n\n    updateButtonStatus() {\n        let r=this.state.recipeId;\n\n            if (this.state.userType === 'REGULAR') {\n\n                    console.log(this.state.userId);\n                    console.log(this.state.recipeId);\n                    this.regularUserServices.findFavoriteRecipeId(this.state.userId)\n                        .then((recipeIds) => {\n\n                            if(recipeIds.indexOf(r)!==-1) {\n                                this.setState({\n                                    defaultButtonIcon: ['fas', 'heart'],\n                                    isActioned: true\n                                })\n                            } else {\n                                this.setState({\n                                    defaultButtonIcon: ['far', 'heart'],\n                                    isActioned: false\n                                })\n                            }\n                            }\n\n                            )\n\n\n\n            } else if (this.state.userType === 'CHEF') {\n                console.log(this.state.userId);\n                console.log(this.state.recipeId);\n                this.chefServices.findEndorsedRecipeId(this.state.userId)\n                    .then((recipeIds) => {\n\n                            if(recipeIds.indexOf(this.state.recipeId)!==-1) {\n                                this.setState({\n                                    defaultButtonIcon: ['fas', 'thumbs-up'],\n                                    isActioned: true\n                                })\n                            } else {\n                                this.setState({\n                                    defaultButtonIcon: ['far', 'thumbs-up'],\n                                    isActioned: false\n                                })\n                            }\n                        })\n\n            } else if (this.state.userType === 'NUTRITIONIST') {\n                console.log(this.state.userId);\n                console.log(this.state.recipeId);\n                this.nutritionistServices.findEndorsedRecipeId(this.state.userId)\n                    .then((recipeIds) => {\n\n                        if(recipeIds.indexOf(this.state.recipeId)!==-1) {\n                            this.setState({\n                                defaultButtonIcon: ['fas', 'thumbs-up'],\n                                isActioned: true\n                            })\n                        } else {\n                            this.setState({\n                                defaultButtonIcon: ['far', 'thumbs-up'],\n                                isActioned: false\n                            })\n                        }\n                    })\n\n            }\n\n        }\n\n\n\n\n    updateIngredient = () => {\n        let recipe = JSON.parse(JSON.stringify(this.state.recipe));\n        if (this.state.detail === 'ingredients')\n            recipe.ingredients = this.state.updateValue.split(',').map(function (item) {\n                return item.trim();\n            })\n        else\n            recipe[`${this.state.detail}`] = this.state.updateValue;\n        this.recipeService.updateRecipe(this.state.recipeId, recipe)\n            .then(() => this.renderAllFields('', '', 'd-none'))\n            .then(() => {\n                this.setState({\n                    message: 'Recipe updated successfully',\n                    messageBox: true\n                })\n            })\n    };\n\n    handleCloseMessageBox = () => {\n        this.setState({\n            message: '',\n            messageBox: false});\n    };\n\n    selectNameForUpdate = (recipeName) => this.renderAllFields(recipeName, 'name', 'd-block')\n\n\n    selectIngredientsForUpdate = (recipeIngredients) =>\n        this.renderAllFields(recipeIngredients, 'ingredients', 'd-block')\n\n\n    selectStepsForUpdate = (recipeSteps) => this.renderAllFields(recipeSteps, 'steps', 'd-block')\n\n    selectImageForUpdate = (recipeImage) => this.renderAllFields(recipeImage, 'image', 'd-block')\n\n    render() {\n        let updatedValue;\n        return (\n            <div>\n                <div id=\"header\">\n                </div>\n                <section className=\"about-banner relative\">\n                    <div className=\"overlay overlay-bg\"></div>\n                    <div className=\"container\">\n                        <div className=\"row d-flex align-items-center justify-content-center\">\n                            <div className=\"about-content col-lg-12\">\n                                <div className=\"section-top2 text-center\">\n                                    <h3 style={{color:\"white\"}}> <span>Recipe</span>Details</h3>\n                                    <p className=\"text-white link-nav\"><Link className=\"text-white link-nav\" to='/home'>Back Home </Link>\n\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                <section className=\"home-about-area section-gap\">\n                    <div className=\"container\">\n                        <h1 className=\"mb-5 text-center\">Recipe Details\n                            <span>&nbsp;&nbsp;<a className='hand-cursor'\n                                                 onClick={this.toggleAction} data-tip={this.state.defaultActionTooltip}>\n                                {\n                                    this.state.loggedIn &&\n                                    (this.state.userType === 'REGULAR' && <FontAwesomeIcon\n                                    icon={this.state.defaultButtonIcon}/>\n                                || (this.state.userType === 'CHEF' || this.state.userType === 'NUTRITIONIST') &&\n                                <FontAwesomeIcon\n                                    icon={this.state.defaultButtonIcon}/>)\n                                }</a></span>\n                        </h1>\n                        <div className=\"row\">\n                            <div className=\"col-lg-7 home-about-left\">\n                                <div className=\"table-responsive\">\n\n                                    <table className=\"groceries table table-bordered table-hover\"\n                                           id=\"grocery_table\" style={{tableLayout: \"\",borderCollapse:\"collapse\"}}>\n                                        <thead>\n                                        <tr>\n                                            <th>Item</th>\n                                            <th>Detail</th>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) &&<th>Actions</th>}\n                                        </tr>\n                                        </thead>\n                                        <tbody>\n                                        <tr>\n                                            <td className=\"name-theader\">Name</td>\n                                            <td style={{wordWrap:\"breakWord\"}}className=\"name-theader\">{this.state.recipe.name}</td>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) && <td className=\"actions-theader\"><span><a\n                                                onClick={() => this.selectNameForUpdate(this.state.recipe.name)}>\n                                                <FontAwesomeIcon\n                                                    icon=\"pencil-alt\"\n                                                    className=\"fas\"/></a></span>\n                                            </td>}\n                                        </tr>\n                                        <tr>\n                                            <td className=\"name-theader\">Ingredients</td>\n                                            <td style={{wordWrap:\"breakWord\"}} className=\"name-theader\">{this.state.recipe.ingredients}</td>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) &&<td className=\"actions-theader\"><span><a\n                                                onClick={() =>\n                                                    this.selectIngredientsForUpdate(this.state.recipe.ingredients)}>\n                                                <FontAwesomeIcon\n                                                    icon=\"pencil-alt\"\n                                                    className=\"fas\"/></a></span>\n                                            </td>}\n                                        </tr>\n                                        <tr>\n                                            <td className=\"name-theader\">Steps</td>\n                                            <td style={{wordWrap:\"breakWord\"}} className=\"name-theader\">{this.state.recipe.steps}</td>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) &&<td className=\"actions-theader\"><span><a\n                                                onClick={() => this.selectStepsForUpdate(this.state.recipe.steps)}>\n                                                <FontAwesomeIcon\n                                                    icon=\"pencil-alt\"\n                                                    className=\"fas\"/></a></span>\n                                            </td>}\n                                        </tr>\n                                        <tr>\n                                            <td className=\"name-theader\">Image</td>\n                                            <td style={{wordWrap:\"breakWord\",width:\"100px\"}} className=\"name-theader\">{this.state.recipe.image}</td>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) &&<td className=\"actions-theader\"><span><a\n                                                onClick={() => this.selectImageForUpdate(this.state.recipe.image)}>\n                                                <FontAwesomeIcon\n                                                    icon=\"pencil-alt\"\n                                                    className=\"fas\"/></a></span>\n                                            </td>}\n                                        </tr>\n\n                                        {this.state.ownerName &&\n                                        <tr>\n                                            <td className=\"name-theader\">Owned By</td>\n                                            <td className=\"name-theader\">{this.state.ownerName}</td>\n\n\n                                        </tr>\n                                        }\n                                        {(this.state.endorsedByChef.length != 0\n                                            || this.state.endorsedByNutritionist.length != 0)\n                                        &&\n                                        <tr>\n                                            <td className=\"name-theader\">Endorsed By</td>\n                                            <td className=\"\">\n\n                                                {this.state.endorsedByChef.length != 0 &&\n                                                <div>\n                                                    <div className='row endorsed-theader'>\n                                                        <FontAwesomeIcon\n                                                            icon={faUtensils}\n                                                            className=\"fas\" data-tip='Chefs'/>\n                                                    </div>\n                                                    {/*{this.state.endorsedByChef.map((e, index) => <div*/}\n                                                    {/*className='row endorsed-theader'>*/}\n                                                    {/*<Link to={`/profile/${this.state.chefIds[index]}`}>{e}</Link></div>)*/}\n                                                    {/*}*/}\n\n                                                    {this.state.endorsedByChef.map(e => <div\n                                                        className='row endorsed-theader'>\n                                                        <Link to={`/profile/CHEF/${e._id}`} className='hand-cursor'>\n                                                            {e.firstName}</Link>\n                                                    </div>)\n                                                    }\n                                                </div>\n                                                }\n                                                {this.state.endorsedByNutritionist.length != 0 &&\n                                                <div>\n                                                    <div className='row endorsed-theader'>\n                                                        <FontAwesomeIcon\n                                                            icon={faMedkit}\n                                                            className=\"fas\"/>\n                                                    </div>\n                                                    {this.state.endorsedByNutritionist.map(e => <div\n                                                        className='row endorsed-theader'><Link\n                                                        to={`/profile/NUTRITIONIST/${e._id}`}\n                                                        className='hand-cursor'>\n                                                        {e.firstName}</Link></div>)\n                                                    }\n                                                </div>\n                                                }\n                                            </td>\n\n                                        </tr>\n                                        }\n\n                                        <tr className=\"full-width red-border\">\n                                            <td>\n                                                <div className={`${this.state.updatedFieldVisibility}`}>\n                                                    <label className='text-red font-weight-bold'>Change -></label></div>\n                                            </td>\n                                            <td className=\"text-red\">\n                                                <div className={`${this.state.updatedFieldVisibility}`}>\n                                                    <input className='full-width no-input-border'\n                                                           value={this.state.updateValue}\n                                                           onChange={this.valueChanged}\n                                                    ></input>\n                                                </div>\n                                            </td>\n                                            {(this.state.ownerName.length>0&&this.state.owner._id===this.state.userId) && <td className=\"actions-theader \">\n                                                <div className={`${this.state.updatedFieldVisibility}`}><span>\n                                                <a className=\"text-red\" onClick={this.updateIngredient}>\n                                                <FontAwesomeIcon\n                                                    icon=\"check\"\n                                                    className=\"fas\"/></a></span>\n                                                </div>\n                                            </td>}\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            <div className=\"col-lg-4 home-about-right\">\n                                {this.state.recipe.image !== '' && <img width={\"500px\"} height={\"400px\"} src={this.state.recipe.image} alt=\"\"/>\n                                ||\n                                <img src={require('./about-img.jpg')} alt=\"\"/>}\n\n                            </div>\n\n                        </div>\n                    </div>\n                </section>\n                <Modal show={this.state.messageBox} onHide={this.handleCloseMessageBox}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Yay!</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>{this.state.message}</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"primary\" onClick={this.handleCloseMessageBox}>\n                            Ok\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n                <ReactTooltip/>\n            </div>\n        );\n    }\n\n\n\n}\n\nexport default RecipeDetails;\n\n"]},"metadata":{},"sourceType":"module"}